<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>工厂列表</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <div id="app" class="min-h-screen p-4 md:p-8">
    <header class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between mb-4">
        <h1 class="text-2xl md:text-3xl font-bold">工厂列表</h1>
        <div>
          <input v-model="q" placeholder="搜索名称 / 类别 / 标签" class="border rounded px-3 py-1 w-60" />
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto grid gap-6 md:grid-cols-3 sm:grid-cols-2 grid-cols-1">
      <section class="col-span-1 md:col-span-2">
        <div class="bg-white shadow rounded p-4">
          <div v-if="filtered.length===0" class="py-8 text-center text-gray-500">没有匹配的工厂</div>
          <ul>
            <li v-for="(f, idx) in paged" :key="idx" class="border-b last:border-b-0">
              <div class="flex items-center p-3 hover:bg-gray-50">
                <div class="w-20 h-12 flex-shrink-0 rounded bg-gray-100 flex items-center justify-center overflow-hidden">
                  <img v-if="f.images && f.images.length" :src="f.images[0]" alt="logo" class="w-full object-cover" />
                  <svg v-else xmlns='http://www.w3.org/2000/svg' class='w-6 h-6 text-gray-400' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 7a4 4 0 014-4h10a4 4 0 014 4v10a4 4 0 01-4 4H7a4 4 0 01-4-4V7z' /></svg>
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="font-semibold text-lg">{{ f.name || "(无名称)" }}</div>
                      <div class="text-sm text-gray-600">{{ f.main_categories }}</div>
                    </div>
                    <div class="text-right text-sm text-gray-600">
                      <div>联系方式</div>
                      <div class="font-medium">{{ f.phone }}</div>
                    </div>
                  </div>
                  <div class="mt-2 text-sm text-gray-500">
                    标签: <span style="background: #e70606;color: #fff;padding: 2px;border-radius: 5px;" v-if="f.grade">{{f.grade}}</span>
                    <span v-if="f.tags">{{ f.tags }}</span><span v-else>—</span>

                  </div>

                <div class="mt-2 text-sm text-black-500 font-semibold" v-if="f.price">
                    价格区间(RMB): <span v-if="f.price">{{ f.price }}</span>
                  </div>
                      <div class="mt-2 text-sm text-black-500 font-semibold" v-if="f.remark">
                    备注: <span v-if="f.remark">{{ f.remark }}</span>
                  </div>
                  <div class="mt-2">
                    <button @click="openDetail(f)" class="px-3 py-1 rounded bg-blue-600 text-white text-sm">详情</button>
                  </div>
                </div>
              </div>
            </li>
          </ul>

          <div class="flex items-center justify-between mt-4">
            <div class="text-sm text-gray-600">共 {{ filtered.length }} 条</div>
            <div class="space-x-2">
              <button @click="prevPage" :disabled="page===1" class="px-2 py-1 border rounded disabled:opacity-50">上一页</button>
              <button @click="nextPage" :disabled="page>=pages" class="px-2 py-1 border rounded disabled:opacity-50">下一页</button>
            </div>
          </div>

        </div>
      </section>

      <aside class="col-span-1">
        <div class="bg-white shadow rounded p-4">
          <h2 class="font-semibold mb-2">筛选</h2>
          <div class="mb-2">
            <label class="text-sm text-gray-600">页面大小</label>
            <select v-model.number="perPage" class="w-full border rounded px-2 py-1">
              <option v-for="n in [10,20,50,100]" :value="n">{{ n }}</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="text-sm text-gray-600">只显示有图片</label>
            <input type="checkbox" v-model="hasImage" class="ml-2" />
          </div>
          <div class="text-sm text-gray-600 mt-4">点击列表中“详情”查看全部信息并跳转。</div>
        </div>
      </aside>
    </main>

    <div v-if="detail" class="fixed inset-0 bg-black/40 flex items-start md:items-center justify-center p-4 z-50">
      <div class="bg-white rounded shadow max-w-4xl w-full max-h-[90vh] overflow-auto">
        <div class="flex items-center justify-between p-4 border-b">
          <div class="text-lg font-semibold">{{ detail.name || "(无名称)" }}</div>
          <div><button @click="detail=null" class="px-3 py-1 border rounded">关闭</button></div>
        </div>
        <div class="p-4 grid gap-4 md:grid-cols-3">
          <div class="md:col-span-2">
          <div class="mb-4">
              <div class="text-sm text-gray-600">工厂简介</div>
              <div class="font-medium text-lg">{{ detail.raw.showroom }}</div>
<!--              <div class="text-sm text-gray-500 mt-2" v-if="detail.raw.contact_info">{{ detail.raw.contact_info }}</div>-->
            </div>
       <div class="mb-4">
              <div class="text-sm text-gray-600">1688店铺</div>
                <a :href="detail.raw.shop_url" target="_blank" class="text-blue-600 underline">点击进入</a>
<!--              <div class="text-sm text-gray-500 mt-2" v-if="detail.raw.contact_info">{{ detail.raw.contact_info }}</div>-->
            </div>

            <div class="mb-4">
              <div class="text-sm text-gray-600">联系方式</div>
              <div class="font-medium text-lg">{{ detail.phone }}</div>
<!--              <div class="text-sm text-gray-500 mt-2" v-if="detail.raw.contact_info">{{ detail.raw.contact_info }}</div>-->
            </div>
            <div class="mb-4">
              <div class="text-sm text-gray-600">主营目录</div>
              <div class="font-medium">{{ detail.main_categories }}</div>
            </div>
            <div class="mb-4">
              <div class="text-sm text-gray-600">标签</div>
              <div>{{ detail.tags }}</div>
            </div>

<div class="mb-4" v-if="Object.keys(detail.raw).length">
  <h3 class="font-semibold mb-2">详细信息</h3>

  <!-- 基本信息 -->
  <div v-if="detail.raw.profile">
    <h4 class="font-medium mt-2 mb-1">基本信息</h4>
    <table class="min-w-full text-sm border">
      <tbody>
        <tr v-for="(v,k) in parseJson(detail.raw.profile)" :key="'profile-'+k" class="border-t">
          <td class="py-2 align-top font-medium w-40 text-gray-700">{{ k }}</td>
          <td class="py-2" v-html="formatValue(v)"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- 合作模式 -->
  <div v-if="detail.raw.cooperation">
    <h4 class="font-medium mt-4 mb-1">合作模式</h4>
    <table class="min-w-full text-sm border">
      <tbody>
        <tr v-for="(v,k) in parseJson(detail.raw.cooperation)" :key="'coop-'+k" class="border-t">
          <td class="py-2 align-top font-medium w-40 text-gray-700">{{ k }}</td>
          <td class="py-2" v-html="formatValue(v)"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- 联系方式 -->
  <div v-if="detail.raw.contact_info">
    <h4 class="font-medium mt-4 mb-1">联系方式</h4>
    <table class="min-w-full text-sm border">
      <tbody>
        <tr v-for="(v,k) in parseJson(detail.raw.contact_info)" :key="'contact-'+k" class="border-t">
          <td class="py-2 align-top font-medium w-40 text-gray-700">{{ k }}</td>
          <td class="py-2" v-html="formatValue(v)"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- 验厂报告 -->
  <div v-if="detail.raw.sgs_report">
    <h4 class="font-medium mt-4 mb-1">验厂报告</h4>
    <a :href="detail.raw.sgs_report" target="_blank" class="text-blue-600 underline">点击查看</a>
  </div>
</div>



          </div>


        </div>
      </div>
    </div>

  </div>

<script>
/* 数据占位符 — 生成时由 Python 替换为 JSON 列表 */
const data = [{"name": "浙江宽宏电器有限公司", "phone": "15888901137", "main_categories": "主营:|消毒器暖奶器|养生壶|电动调奶器", "tags": "2025上榜四钻工厂|入围电动调奶器热度榜 第3名", "images": ["https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png"], "raw": {"price": "50", "grade": "", "remark": "需要确定是否有欧款", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=b2b-25503505401it8w&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=662208827955,566247012575,652266737051,674195949820,863097072387,863094616576,862339183439,863099716143,863097684323,863099012266&aHdkaW5n_isUseGray=true", "name": "浙江宽宏电器有限公司", "tags": "2025上榜四钻工厂|入围电动调奶器热度榜 第3名", "main_categories": "主营:|消毒器暖奶器|养生壶|电动调奶器", "honors": "https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png", "profile": "{\"成立时间\":\"2015.05.12\",\"年交易额\":\"2000万以上\",\"工厂面积\":\"11905m²\",\"员工总数\":\"483人\"}", "cooperation": "{\"定制起订量\":\"1000件\",\"贴牌起订量\":\"1000件\",\"接外贸订单\":\"不支持\",\"加工方式\":\"清加工 包工包料 来样加工 来图加工\",\"开票点数\":\"13%\",\"增值税发票\":\"有\"}", "showroom": "浙江宽宏电器有限公司是消毒器、暖奶器、小家电等产品专业生产加工的公司，拥有完整、科学的质量管理体系。永康市宽宏电器有限公司的诚信、实力和产品质量获得业界的认可。欢迎各界朋友莅临参观、指导和业务洽谈。", "sgs_report": "https://r.1688.com/auth/fcaReport.htm?_input_charset=GBK&showReport=true&mid=b2b-25503505401it8w", "shop_url": "https://shop1434646728965.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"86 0579 87116300\",\"手机\":\"15888901137\",\"传真\":\"暂无\",\"地址\":\"浙江省金华市永康市金华市永康市城西新区梅垄路192号\"}"}, "price": "50", "remark": "需要确定是否有欧款", "grade": ""}, {"name": "中山市优益电器实业有限公司", "phone": "18928114075", "main_categories": "主营:|消毒器暖奶器|养生壶|电火锅", "tags": "2025上榜三钻工厂|入围消毒器暖奶器服务榜 第2名", "images": ["https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png"], "raw": {"price": "75", "grade": "", "remark": "辨识度高.需要确定是否有欧款", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=b2b-25501685830hjeq&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=672750696772,663764495144,674746812325,673700969705,632582485847,598637627425,692477783494,620388564838,821084533407,856711256461&aHdkaW5n_isUseGray=true", "name": "中山市优益电器实业有限公司", "tags": "2025上榜三钻工厂|入围消毒器暖奶器服务榜 第2名", "main_categories": "主营:|消毒器暖奶器|养生壶|电火锅", "honors": "https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png", "profile": "{\"成立时间\":\"2014.11.07\",\"年交易额\":\"2000万以上\",\"工厂面积\":\"12000m²\",\"员工总数\":\"213人\"}", "cooperation": "{\"定制起订量\":\"1000台\",\"贴牌起订量\":\"2000台\",\"接外贸订单\":\"不支持\",\"加工方式\":\"包工包料\",\"开票点数\":\"13%\",\"增值税发票\":\"有\"}", "showroom": "OIDIRE是一家自主研发生产的科技创新型母婴品牌。品牌成立于德国，2013年开始在中国市场生产和销售\n品牌专注于智能母婴精品研发，专业提供综合和创新的制造方案，从设计、开发、生产、销售、服务，全方面为客户，提供创新的产品。时尚，高贵，精致，实用是OIDIRE一贯的坚持，用心做好每一个产品\n在中国，OIDIRE主要以新兴网络销售渠道为主，为用户提供新颖实用的高新技术母婴产品，科学喂养时代，致力于更好帮助新时代妈妈轻松育宝，OIDIRE中国研发制造基地位于中国广东省中山市，处于珠三角核心地段，拥有强大的供应链配套体系和研发制造能力。公司占地50余亩，员工数288人，公司全年产能超580万台\n公司专注于智能母婴精品研发，公司特别建立研发中心共16人，由工业设计组3人和产品开发组11人以及市场调研组2人三部分组成。创新实用是OIDIRE一贯的坚持。科学喂养时代，致力于更好帮助新时代妈妈。收起更多", "sgs_report": "https://r.1688.com/auth/fcaReport.htm?_input_charset=GBK&showReport=true&mid=b2b-25501685830hjeq", "shop_url": "https://shop1434042036667.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"86 0760 23123860\",\"手机\":\"18928114075\",\"传真\":\"86 0760 23123861\",\"地址\":\"广东省中山市阜沙镇颂德路优益工业园\"}"}, "price": "75", "remark": "辨识度高.需要确定是否有欧款", "grade": ""}, {"name": "浙江航佳工贸有限公司", "phone": "17280070789", "main_categories": "", "tags": "入围吸奶器实力榜 第4名|入围妈咪包热度榜 第17名", "images": [], "raw": {"price": "75", "grade": "", "remark": "", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=b2b-2210526273477afecb&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=642402084841,642722065619,669032398663,647288173008,646318061092,642154082237,664905145446,643497063600,834133704545,713565638030&aHdkaW5n_isUseGray=true", "name": "浙江航佳工贸有限公司", "tags": "入围吸奶器实力榜 第4名|入围妈咪包热度榜 第17名", "main_categories": "", "honors": "", "profile": "{\"成立时间\":\"2014.11.18\",\"年交易额\":\"2000万以上\",\"工厂面积\":\"33000m²\",\"员工总数\":\"194人\"}", "cooperation": "{\"定制起订量\":\"500台\",\"贴牌起订量\":\"500台\",\"接外贸订单\":\"不支持\",\"加工方式\":\"来样加工 来图加工 清加工 包工包料\",\"开票点数\":\"13%\",\"增值税发票\":\"有\"}", "showroom": "浙江航佳工贸有限公司成立于2014年，是中国高新技术企业、商标型示范企业、纳税优胜企业、合资经营企业。有ISO9001-2015质量管理体系认证。产品有3C、CE、CB认证。工厂位于永康市龙山镇是一家集自主设计研发、全套流水线、品牌营销、服务支持为一体的综合性企业现有运营、设计、策划、技术、管理等多个团队，具备成熟的自主产品研发、产品设计、规模化生产能力，拥有科学的生产销售模式和严格的品质管理体系。收起更多", "sgs_report": "https://r.1688.com/auth/fcaReport.htm?_input_charset=GBK&showReport=true&mid=b2b-2210526273477afecb", "shop_url": "https://shop9k42381h815b0.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"暂无\",\"手机\":\"17280070789\",\"传真\":\"暂无\",\"地址\":\"浙江省金华市永康市龙山镇浙商回归创业创新园创四路1号\"}"}, "price": "75", "remark": "", "grade": ""}, {"name": "佛山市大乔电器有限公司", "phone": "13928238703", "main_categories": "", "tags": "入围电动调奶器服务榜 第2名|入围消毒器暖奶器实力榜 第8名", "images": [], "raw": {"price": "60-75", "grade": "", "remark": "kaspi.kz同款三合一,二合一款", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=b2b-2207885997860636ec&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=673634616007,727851270231,672793033926,737708919743,650811441619,650393840847,650812537151,683639494168,673915789956,727895103198&aHdkaW5n_isUseGray=true", "name": "佛山市大乔电器有限公司", "tags": "入围电动调奶器服务榜 第2名|入围消毒器暖奶器实力榜 第8名", "main_categories": "", "honors": "", "profile": "{\"成立时间\":\"2017.09.01\",\"年交易额\":\"1000万~2000万\",\"工厂面积\":\"1200m²\",\"员工总数\":\"25人\"}", "cooperation": "{\"定制起订量\":\"500个\",\"贴牌起订量\":\"500个\",\"接外贸订单\":\"支持\",\"加工方式\":\"包工包料 来样加工\",\"开票点数\":\"10%\",\"增值税发票\":\"有\"}", "showroom": "本公司位于小家电之乡“佛山顺德“，主要经营各种型号的温奶器、消毒器、多功能温奶消毒器、调奶器。紫外线杀菌消毒器等产品，我们有自动化的生产设备和完善的管理，我们的宗旨是保证质量，为我们的顾客创造更大的价值。专业生产，从生产-安装-销售一条龙式的生产模式，我们是真正的生产厂家，欢迎各位莅临考察，欢迎采购！收起更多", "sgs_report": "https://r.1688.com/auth/fcaReport.htm?_input_charset=GBK&showReport=true&mid=b2b-2207885997860636ec", "shop_url": "https://shop5344q178in661.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"86 0757 12345678\",\"手机\":\"13928238703\",\"传真\":\"暂无\",\"地址\":\"广东省佛山市顺德区容桂小黄圃创业路5号\"}"}, "price": "60-75", "remark": "kaspi.kz同款三合一,二合一款", "grade": ""}, {"name": "佛山市顺德区朗晨电器制造有限公司", "phone": "13500276406", "main_categories": "主营:|消毒器暖奶器|吸奶器|家用早餐机", "tags": "2025上榜二钻工厂|入围吸奶器实力榜 第5名", "images": ["https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png"], "raw": {"price": "45+", "grade": "", "remark": "单瓶,需要确定是否有欧规", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=cnlonsun&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=762840376239,732833231051,743900922693,753686451677,751703565652,750641684793,750469019345,733377885448,747594518742,733342518931&aHdkaW5n_isUseGray=true", "name": "佛山市顺德区朗晨电器制造有限公司", "tags": "2025上榜二钻工厂|入围吸奶器实力榜 第5名", "main_categories": "主营:|消毒器暖奶器|吸奶器|家用早餐机", "honors": "https://img.alicdn.com/imgextra/i3/O1CN01Pelhv624HDt03gZ6K_!!6000000007365-2-tps-160-40.png", "profile": "{\"成立时间\":\"2006.08.21\",\"年交易额\":\"2000万以上\",\"工厂面积\":\"15198m²\",\"员工总数\":\"153人\"}", "cooperation": "{\"定制起订量\":\"500个\",\"贴牌起订量\":\"500个\",\"接外贸订单\":\"支持\",\"加工方式\":\"来图加工 来样加工 包工包料 轻加工\",\"开票点数\":\"13%\",\"增值税发票\":\"有\"}", "showroom": "佛山市顺德区朗晨电器制造有限公司成立于2006年，地处佛山市顺德区，环境优美，交通便利。工厂拥有先进的设备、经验丰富的管理人员以及操作熟练的工人，并致力于婴儿暖奶器、奶瓶消毒器、吸奶器等婴儿产品的研发、生产与销售。工厂在产品的研发、装配和品质检验等方面严格把关，在成本方面合理控制，为客户提供价优物美的产品。产品获得了CCC, CE，E-MARK等相关认证，并远销东南亚、欧洲、南美洲多个国家和地区。\n工厂顺利通过了ISO9001、BSCI和BRC体系认证并有效运作。\n我们将不懈努力，提高产品质量，提升服务水平，为客户提供更加优质的OEM与ODM服务。 收起更多", "sgs_report": "https://r.1688.com/auth/fcaReport.htm?_input_charset=GBK&showReport=true&mid=cnlonsun", "shop_url": "https://cnlonsun.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"86 0757 25507363\",\"手机\":\"13500276406\",\"传真\":\"暂无\",\"地址\":\"广东省佛山市顺德区均安镇畅兴工业园智安北路22号之一\"}"}, "price": "45+", "remark": "单瓶,需要确定是否有欧规", "grade": ""}, {"name": "深圳海猫智造有限公司", "phone": "18938852137", "main_categories": "", "tags": "入围婴儿监护器服务榜 第3名|入围消毒器暖奶器热度榜 第5名", "images": [], "raw": {"price": "12-80", "grade": "", "remark": "保温的杯子套,没有参照", "factory_card_url": "https://sale.1688.com/factory/card.html?memberId=b2b-2216289246990e0b87&aHdkaW5n_isCentral=true&aHdkaW5n_isGrayed=false&topOfferIds=743061698977,970523181429,903559081277,811299849713,860549131905&aHdkaW5n_isUseGray=true", "name": "深圳海猫智造有限公司", "tags": "入围婴儿监护器服务榜 第3名|入围消毒器暖奶器热度榜 第5名", "main_categories": "", "honors": "", "profile": "{\"成立时间\":\"2023.07.28\",\"年交易额\":\"101~500万\",\"员工总数\":\"51~100人\"}", "cooperation": "{\"定制起订量\":\"1000件\",\"贴牌起订量\":\"1000件\",\"接外贸订单\":\"支持\",\"加工方式\":\"清加工 来图加工 包工包料\",\"开票点数\":\"13%\",\"增值税发票\":\"有\"}", "showroom": "深圳海猫智造有限公司是一家专业从事母婴产品 奶瓶保温套 尿湿报警器 吸鼻器 摇奶器 吸奶器等母婴系列产品的企业，集产品研发、生产、销售为一体的的专业公司，拥有雄厚的经济和技术实力。公司以\"“小而精”，小事大作，小企大业，不求规模大，但求实力强\"为己任，面对迅速发展、竞争激烈的保健行业，人们风雨兼程，公司不断壮大；智慧创造卓越，汗水浇筑辉煌，人们怀着强烈的时代使命感，发扬求真务实、开拓创新的精神；脚踏实地、努力拼搏，争创一流企业和一流的品牌。 工厂充分发挥以前与大型日本企业合作配套时的技术积累与管理经验，严格控制生产过程、质检流程，从材料的选用、检验，到作业规范、操作标准化，一直到成品的出库均建成了一套科学的现代管理组织结构和系统，本公司产品的设计功能实用、用户体验舒适、以及时尚的包装（中性包装，也可贴牌个性生产）。收起更多", "sgs_report": "", "shop_url": "https://shop7k98k41o95114.1688.com/", "shop_categories": "", "contact_info": "{\"公司名称\":null,\"电话\":\"暂无\",\"手机\":\"18938852137\",\"传真\":\"暂无\",\"地址\":\"广东省深圳市宝安区新桥街道新和大道6-18号大宏高新科技园\"}"}, "price": "12-80", "remark": "保温的杯子套,没有参照", "grade": ""}];

const app = Vue.createApp({
  data(){ return {
    q: '',
    raw: data,
    page: 1,
    perPage: 20,
    hasImage: false,
    detail: null
  }},
  computed: {
    filtered(){
      let q = this.q.trim().toLowerCase();
      let arr = this.raw.slice();
      if(this.hasImage) arr = arr.filter(x=>x.images && x.images.length);
      if(q){
        arr = arr.filter(f=>{
          return (f.name||'').toLowerCase().includes(q)
            || (f.main_categories||'').toLowerCase().includes(q)
            || (f.tags||'').toLowerCase().includes(q)
            || (f.phone||'').toLowerCase().includes(q);
        });
      }
      return arr;
    },
    pages(){ return Math.max(1, Math.ceil(this.filtered.length / this.perPage)); },
    paged(){ return this.filtered.slice((this.page-1)*this.perPage, this.page*this.perPage); }
  },
  methods:{
    openDetail(f){ this.detail = f; window.scrollTo(0,0); },
    prevPage(){ if(this.page>1) this.page--; },
    nextPage(){ if(this.page<this.pages) this.page++; },
    formatValue(v){
      if(v===null || v===undefined || v==='') return '<span class="text-gray-400">—</span>';
      let s = String(v).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      s = s.replace(/(https?:\/\/[^\s,;]+)/g, '<a href="$1" target="_blank" class="text-blue-600 underline">$1</a>');
      s = s.replace(/\n/g,'<br/>');
      return s;
    },
      parseJson(str){
    try{
      const obj = JSON.parse(str);
      if(typeof obj === 'object' && obj !== null){
        return obj;
      }
    }catch(e){}
    return { 原文: str };
  },
  filteredOtherFields(raw){
    const skipKeys = [
      'factory_card_url','name','tags','honors','showroom','shop_url',
      'profile','cooperation','sgs_report','contact_info'
    ];
    const out = {};
    for(const [k,v] of Object.entries(raw)){
      if(skipKeys.includes(k)) continue;
      if(k === 'main_categories' && !v) continue;
      out[k] = v;
    }
    return out;
  }
  },
  watch:{
    perPage(){ this.page = 1; },
    q(){ this.page = 1; }
  }
}).mount('#app');
</script>
</body>
</html>
